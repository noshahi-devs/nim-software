<div class="dashboard-main-body">
  <app-breadcrumb [title]="'StudentList - Edit Student'" [main-title]="'Edit Student'"></app-breadcrumb>
  
  <div class="row gy-4">
    <div class="col-lg-12">
      <div class="card h-100">
        <div class="card-body p-24">
          
          <ul class="nav border-gradient-tab nav-pills mb-20 d-inline-flex" id="pills-tab" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active px-24" id="pills-edit-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-edit-profile" type="button" role="tab">Edit Profile</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link px-24" id="pills-change-passwork-tab" data-bs-toggle="pill" data-bs-target="#pills-change-passwork" type="button" role="tab">Change Password</button>
            </li>
             <li class="nav-item" role="presentation">
                          <button class="nav-link d-flex align-items-center px-24" id="pills-notification-tab" data-bs-toggle="pill" data-bs-target="#pills-notification" type="button" role="tab" aria-controls="pills-notification" aria-selected="false" tabindex="-1">
                            Notification Settings
                          </button>
            </li>
          </ul>

          <div class="tab-content" id="pills-tabContent">   
            <!-- Edit Profile -->
            <div class="tab-pane fade show active" id="pills-edit-profile" role="tabpanel">
              <h6 class="text-md text-primary-light mb-16">Profile Image</h6>

              <div class="mb-24 mt-16">
                <div class="avatar-upload">
                  <div class="avatar-edit position-absolute bottom-0 end-0 me-24 mt-16 z-1 cursor-pointer">
                    <input type='file' id="imageUpload" accept=".png, .jpg, .jpeg" hidden>
                    <label for="imageUpload" class="w-32-px h-32-px d-flex justify-content-center align-items-center bg-primary-50 text-primary-600 border border-primary-600 rounded-circle">
                      <iconify-icon icon="solar:camera-outline" class="icon"></iconify-icon>
                    </label>
                  </div>
                  <div class="avatar-preview">
                    <div id="imagePreview" [ngStyle]="{'background-image': 'url(' + studentData?.profile + ')'}"></div>
                  </div>
                </div>
              </div>

              <form *ngIf="studentData">
                <div class="row">
                  <div class="col-sm-6">
                    <div class="mb-20">
                      <label class="form-label fw-semibold text-primary-light text-sm mb-8">Full Name</label>
                      <input type="text" class="form-control radius-8" [(ngModel)]="studentData.name" name="name" placeholder="Enter Full Name">
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="mb-20">
                      <label class="form-label fw-semibold text-primary-light text-sm mb-8">Roll No</label>
                      <input type="text" class="form-control radius-8" [(ngModel)]="studentData.rollNo" name="rollNo" placeholder="Enter Roll No">
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="mb-20">
                      <label class="form-label fw-semibold text-primary-light text-sm mb-8">Class</label>
                      <input type="text" class="form-control radius-8" [(ngModel)]="studentData.class" name="class" placeholder="Enter Class">
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="mb-20">
                      <label class="form-label fw-semibold text-primary-light text-sm mb-8">Section</label>
                      <input type="text" class="form-control radius-8" [(ngModel)]="studentData.section" name="section" placeholder="Enter Section">
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="mb-20">
                      <label class="form-label fw-semibold text-primary-light text-sm mb-8">Gender</label>
                      <select class="form-control radius-8 form-select" [(ngModel)]="studentData.gender" name="gender">
                        <option value="">Select Gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="mb-20">
                      <label class="form-label fw-semibold text-primary-light text-sm mb-8">Date of Birth</label>
                      <input type="date" class="form-control radius-8" [(ngModel)]="studentData.dob" name="dob">
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="mb-20">
                      <label class="form-label fw-semibold text-primary-light text-sm mb-8">Phone</label>
                      <input type="text" class="form-control radius-8" [(ngModel)]="studentData.phone" name="phone" placeholder="Enter phone number">
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="mb-20">
                      <label class="form-label fw-semibold text-primary-light text-sm mb-8">Guardian Name</label>
                      <input type="text" class="form-control radius-8" [(ngModel)]="studentData.guardianName" name="guardianName" placeholder="Enter Guardian Name">
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="mb-20">
                      <label class="form-label fw-semibold text-primary-light text-sm mb-8">Guardian Phone</label>
                      <input type="text" class="form-control radius-8" [(ngModel)]="studentData.guardianPhone" name="guardianPhone" placeholder="Enter Guardian Phone">
                    </div>
                  </div>
                  
                  <div class="col-sm-6">
                    <div class="mb-20">
                      <label class="form-label fw-semibold text-primary-light text-sm mb-8">Admission Date</label>
                      <input type="date" class="form-control radius-8" [(ngModel)]="studentData.admissionDate" name="admissionDate">
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="mb-20">
                      <label class="form-label fw-semibold text-primary-light text-sm mb-8">Previous School</label>
                      <input type="text" class="form-control radius-8" [(ngModel)]="studentData.previousSchool" name="previousSchool" placeholder="Enter Previous School">
                    </div>
                  </div>
                  <div class="col-sm-12">
                    <div class="mb-20">
                      <label class="form-label fw-semibold text-primary-light text-sm mb-8">Address</label>
                      <textarea class="form-control radius-8" [(ngModel)]="studentData.address" name="address" placeholder="Enter address..."></textarea>
                    </div>
                  </div>
                </div>

                <div class="d-flex align-items-center justify-content-center gap-3 mt-3">
                  <button type="button" (click)="cancel()" class="border border-danger-600 bg-hover-danger-200 text-danger-600 text-md px-56 py-11 radius-8">Cancel</button>
                  <button type="button" (click)="saveStudent()" class="btn btn-primary border border-primary-600 text-md px-56 py-12 radius-8">Save</button>
                </div>
              </form>
            </div>

            <!-- Change Password -->
            <div class="tab-pane fade" id="pills-change-passwork" role="tabpanel">
              <div class="mb-20">
                <label for="newPass" class="form-label fw-semibold text-primary-light text-sm mb-8">New Password</label>
                <input type="password" id="newPass" class="form-control radius-8" placeholder="Enter New Password">
              </div>
              <div class="mb-20">
                <label for="confirmPass" class="form-label fw-semibold text-primary-light text-sm mb-8">Confirm Password</label>
                <input type="password" id="confirmPass" class="form-control radius-8" placeholder="Confirm Password">
              </div>
            </div>
            <!-- Notification Settings -->
            <div class="tab-pane fade" id="pills-notification" role="tabpanel">
  <h6 class="text-md text-primary-light mb-20">Notification Preferences</h6>

  <div class="row">
    <div class="col-sm-6 mb-16">
      <div class="d-flex align-items-center justify-content-between p-16 border rounded-8">
        <div>
          <h6 class="text-md mb-4">Email Notifications</h6>
          <p class="text-sm text-secondary-light mb-0">Receive updates via email</p>
        </div>
        <div class="form-check form-switch">
          <input
            class="form-check-input"
            type="checkbox"
            id="emailNotifications"
            [(ngModel)]="notificationSettings.email"
          />
        </div>
      </div>
    </div>

    <div class="col-sm-6 mb-16">
      <div class="d-flex align-items-center justify-content-between p-16 border rounded-8">
        <div>
          <h6 class="text-md mb-4">SMS Alerts</h6>
          <p class="text-sm text-secondary-light mb-0">Get important alerts via SMS</p>
        </div>
        <div class="form-check form-switch">
          <input
            class="form-check-input"
            type="checkbox"
            id="smsNotifications"
            [(ngModel)]="notificationSettings.sms"
          />
        </div>
      </div>
    </div>

    <div class="col-sm-6 mb-16">
      <div class="d-flex align-items-center justify-content-between p-16 border rounded-8">
        <div>
          <h6 class="text-md mb-4">App Push Notifications</h6>
          <p class="text-sm text-secondary-light mb-0">Show push notifications in the app</p>
        </div>
        <div class="form-check form-switch">
          <input
            class="form-check-input"
            type="checkbox"
            id="pushNotifications"
            [(ngModel)]="notificationSettings.push"
          />
        </div>
      </div>
    </div>
  </div>

  <div class="d-flex justify-content-center gap-3 mt-4">
    <button type="button" class="border border-danger-600 bg-hover-danger-200 text-danger-600 text-md px-56 py-11 radius-8" (click)="cancel()">Cancel</button>
    <button type="button" class="btn btn-primary border border-primary-600 text-md px-56 py-12 radius-8" (click)="saveNotificationSettings()">Save</button>
  </div>
            </div>

          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- Success/Error Modal -->
  <div class="modal fade" id="messageModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content radius-12 p-3">
        <div class="modal-header border-0">
          <h5 class="modal-title fw-semibold" [ngClass]="{'text-success': modalType==='success','text-danger':modalType==='error'}">
            {{ modalType === 'success' ? 'Success!' : 'Error!' }}
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body text-center">{{ modalMessage }}</div>
        <div class="modal-footer border-0 justify-content-center">
          <button type="button" class="btn px-4" data-bs-dismiss="modal" [ngClass]="{'btn-success':modalType==='success','btn-danger':modalType==='error'}">OK</button>
        </div>
      </div>
    </div>
  </div>
</div>
